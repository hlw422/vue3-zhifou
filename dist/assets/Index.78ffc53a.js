import{u as g}from"./user.3ca3fb96.js";import{u as U,q as B,a as h,r as V,b as n,o as E,c as M,d as t,w as o,k as u,f,s as S,E as p}from"./index.edda2ae1.js";const j={__name:"Index",setup(T){const C=U();B(()=>{l()});let d=h([]),m=h(0);const a=V({current:1,size:10,name:""}),l=async()=>{const e=await g.getUserList(a);console.log(e),d.value=e.data.data.records,m.value=e.data.data.total},b=e=>{a.size=e,l()},w=e=>{a.current=e,l()},_=()=>{a.current=1,l()},x=e=>{S.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u7528\u6237\u4FE1\u606F\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{(await g.delUser({id:e})).data.success?(p.success("\u5220\u9664\u6210\u529F"),l()):p.error("\u5220\u9664\u5931\u8D25")}).catch(()=>{p({type:"info",message:"\u53D6\u6D88\u5220\u9664"})})};return(e,r)=>{const c=n("el-button"),z=n("el-input"),i=n("el-table-column"),y=n("el-table"),k=n("el-pagination"),v=n("el-card");return E(),M("div",null,[t(v,null,{default:o(()=>[t(z,{style:{width:"440px"},onClear:_,clearable:"",modelValue:a.name,"onUpdate:modelValue":r[0]||(r[0]=s=>a.name=s),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u59D3\u540D",class:"input-with-select"},{append:o(()=>[t(c,{icon:"Search",onClick:_})]),_:1},8,["modelValue"]),t(y,{data:u(d),border:"",style:{width:"100%","margin-top":"20px"}},{default:o(()=>[t(i,{prop:"name",label:"\u59D3\u540D",width:"180"}),t(i,{prop:"age",label:"\u5E74\u9F84",width:"180"}),t(i,{label:"\u64CD\u4F5C",width:"330"},{default:o(s=>[t(c,{type:"danger",size:"small",onClick:q=>x(s.row.id)},{default:o(()=>[f("\u5220\u9664")]),_:2},1032,["onClick"]),t(c,{size:"small",onClick:()=>u(C).push({path:"/user/detail",query:{id:s.row.id}})},{default:o(()=>[f("\u8BE6\u60C5")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(k,{style:{"margin-top":"20px"},"current-page":a.current,"page-size":a.size,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:u(m),onSizeChange:b,onCurrentChange:w},null,8,["current-page","page-size","total"])]),_:1})])}}};export{j as default};
